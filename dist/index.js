"use strict";function t(t){if(t&&t.__esModule)return t;var e=Object.create(null);return t&&Object.keys(t).forEach((function(o){if("default"!==o){var s=Object.getOwnPropertyDescriptor(t,o);Object.defineProperty(e,o,s.get?s:{enumerable:!0,get:function(){return t[o]}})}})),e.default=t,e}var e=t(require("Storage"));const o=g.getWidth(),s=g.getHeight();let i=0;const A=new class{constructor(){this.cookies=0,this.buildings=[],this.priceIncrease=1.15,this.cps=0}cpc(){return 1}clickCookie(){const t=this.cpc();return this.cookies+=t,t}calculateCps(){this.cps=0;for(const t of this.buildings)this.cps+=t.amount*t.baseCps}processCps(t){this.cookies+=this.cps*(t/1e3)}makeSave(){return{cookies:this.cookies,building:this.buildings.map((t=>t.amount)),lastTime:Date.now()}}loadSave(t){this.cookies=t.cookies,t.building.forEach(((t,e)=>this.buildings[e].amount=t)),this.calculateCps(),this.processCps(Date.now()-t.lastTime)}};class n{constructor(t){this.name=t,this.baseCps=0,this.basePrice=0,this.id=0,this.amount=0,this.id=i,i++,this.baseCps=Math.ceil(10*Math.pow(this.id,.5*this.id+2))/10;let e=Math.pow(10,Math.ceil(Math.log(Math.ceil(this.baseCps))/Math.LN10))/100;this.baseCps=Math.round(this.baseCps/e)*e,this.basePrice=(this.id+9+(this.id<5?0:5*Math.pow(this.id-5,1.75)))*Math.pow(10,this.id)*Math.max(1,this.id-14),this.basePrice*=Math.pow(10,Math.max(0,this.id-15)),e=Math.pow(10,Math.ceil(Math.log(Math.ceil(this.basePrice))/Math.LN10))/100,this.basePrice=Math.round(this.basePrice/e)*e,0===this.id&&(this.baseCps=.1,this.basePrice=15),A.buildings.push(this)}getPrice(){return this.basePrice*Math.pow(A.priceIncrease,this.amount)}buy(){const t=this.getPrice();return!(A.cookies<t)&&(A.cookies-=t,this.amount++,A.calculateCps(),!0)}}new n("Cursor"),new n("Grandma"),new n("Farm"),new n("Mine"),new n("Factory"),new n("Bank"),new n("Temple"),new n("Wizard tower"),new n("Shipment");var r=e.default;const a=[];let C=Date.now(),B=Date.now(),c=Date.now();function h(){c=Date.now(),A.processCps(c-C),c-B>1e3&&(r.writeJSON("cclicker.json",A.makeSave()),B=c),g.clear(),l.draw(g),function(t){const e=o/w.length;t.setFontAlign(-1,-1,0),t.setFont("4x6",5),t.setColor(t.theme.bg),t.fillRect(0,Q,o,s);let i=0;for(const o of w){o===l&&(t.setColor(t.theme.bgH),t.fillRect(i*e,Q,(i+1)*e,s));const A=o.icon();A.palette=o===l?new Uint16Array([t.theme.fgH,t.theme.bgH]):new Uint16Array([t.theme.fg,t.theme.bg]);const n=25/A.height;t.drawImage(A,i*e+e/2-A.width*n/2,Q,{scale:n}),i++}t.setColor(t.theme.fg)}(g),g.setFontAlign(0,0,0),Y&&(g.setFont("4x6",3),g.drawString(Y,o/2,s/2));for(const t of a.concat())g.setFont("4x6",t.size),g.drawString(t.str,t.x,t.y),t.y-=5,t.life--,t.life<0&&a.splice(a.indexOf(t),1);C=c}setInterval(h,50);const w=[];let l;class I{constructor(t,e,o){this.name=t,this.icon=e,this.draw=o,w.push(this)}}const Q=s-25;Bangle.on("touch",((t,e)=>{if(e.y<Q)return;const o=w[Math.floor(e.x/s*w.length)];o&&u(o)}));let D=0,Y=null;function u(t){const e=!l;t!==l&&(l=t,e||(Y=t.name,D&&clearTimeout(D),D=setTimeout((()=>{Y=null,h()}),250)),h())}const E=new I("Cookie",(function(){return{width:34,height:34,bpp:1,buffer:require("heatshrink").decompress(atob("//wgf///8AwIHBgAIBA4IIBAYUP/4DBBgMAhnwn/Agc8h/AB4MADgXAngCBgYJD4YjBgYfBDQIXCBgIXBF4UAngDCDQIADDIQABDIImBDQU8nkMCoQBBG4QsCCQMwGoQ5HMpB2HQ4/wA"))}}),(t=>{const e={width:57,height:57,bpp:8,transparent:254,buffer:require("heatshrink").decompress(atob("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"))};t.drawImage(e,(o-2*e.width)/2,(s-2*e.height)/2,{scale:2}),t.setFontAlign(0,0,0),t.setFont("4x6",2),t.drawString(`${Math.floor(A.cookies)} cookie${1===A.cookies?"":"s"}`,o/2,10)}));Bangle.on("touch",((t,e)=>{if(l!==E)return;e||(e={x:Math.random()*o,y:Math.random()*s});const i=A.clickCookie();a.push({x:e.x,y:e.y,str:`+${i}`,life:5,size:2})}));let d=0;const p=s-25,b=p/3,f=new I("Shop",(function(){return{width:40,height:40,bpp:1,buffer:require("heatshrink").decompress(atob("//w/4ACAgfw4EwAg3ACwM/Ah/wgAdDAgYOBhgTDAgUAh8Mh4EHAIIEFGJZcBAgpKMngEFNAXAh4EEPgUAgYEFAAMA4YEG/g4DAggYGAho2CAg38X4YEB"))}}),(t=>{const e=Math.floor(d/b);t.setFontAlign(-1,-1,0),t.setFont("4x6",3);for(let s=0;s<4;s++){const i=A.buildings[s+e];if(!i)break;(s%2+e%2)%2==0?t.setColor(t.theme.bgH):t.setColor(t.theme.bg),t.fillRect(0,b*(s+e)-d,o,b*(s+e)-d+b),t.setColor(t.theme.fg),t.drawString(i.name,0,b*(s+e)-d),t.drawString(i.amount,t.stringWidth(i.name)+5,b*(s+e)-d),t.drawString(Math.ceil(i.getPrice()),0,b*(s+e)-d+18)}}));Bangle.on("drag",(t=>{l===f&&(d-=t.dy,d<0&&(d=0))})),Bangle.on("touch",((t,e)=>{if(l!==f||!e)return;if(e.y>p)return;const i=Math.floor(d/b);let n=null;for(let t=0;t<4;t++)if(Math.abs(e.y-(b*(t+i)-d+b/2))<b/2){n=A.buildings[t+i];break}n&&n.buy()&&a.push({life:5,str:`+1 ${n.name}`,x:o/2,y:s/2,size:3})})),u(E);const G=r.readJSON("cclicker.json");G&&A.loadSave(G);
